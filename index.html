<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Gestiona</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-50 font-['Inter']">
    <!-- Header with banner image -->
    <header class="w-full bg-white shadow-sm">
        <div class="bg-gradient-to-r from-blue-500 to-blue-700 h-32 flex items-center justify-center">
            <h1 class="text-3xl font-bold text-white">La Gestiona</h1>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="sticky top-0 bg-white shadow-md z-50">
        <div class="max-w-md mx-auto">
            <div class="grid grid-cols-6 gap-1 p-2">
                <button class="nav-btn active flex flex-col items-center justify-center p-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-section="add">
                    <i class="fas fa-plus text-lg mb-1"></i>
                    <span>Ajt</span>
                </button>
                <button class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-section="list">
                    <i class="fas fa-folder text-lg mb-1"></i>
                    <span>Dos</span>
                </button>
                <button class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-section="modify">
                    <i class="fas fa-edit text-lg mb-1"></i>
                    <span>Mod</span>
                </button>
                <button class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-section="delete">
                    <i class="fas fa-trash text-lg mb-1"></i>
                    <span>Sup</span>
                </button>
                <button class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-section="states">
                    <i class="fas fa-chart-bar text-lg mb-1"></i>
                    <span>Eta</span>
                </button>
                <button class="nav-btn flex flex-col items-center justify-center p-2 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-section="search">
                    <i class="fas fa-search text-lg mb-1"></i>
                    <span>Find</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-md mx-auto px-4 py-6 mb-20">
        <!-- Ajouter Section -->
        <section id="add" class="section-content">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold text-gray-800">Ajouter un dossier</h2>
                    <span class="text-sm text-gray-500">* Champs obligatoires</span>
                </div>
                <form id="addDossierForm">
                    <input type="hidden" id="dossierNumber" name="dossierNumber">
                    
                    <!-- Nom du dossier -->
                    <div class="mb-4">
                        <label for="nomDossier" class="block text-sm font-medium text-gray-700 mb-1">
                            Nom du dossier <span class="text-red-500">*</span>
                        </label>
                        <input type="text" 
                               id="nomDossier" 
                               name="nomDossier" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                               required>
                        <p class="text-xs text-gray-500 mt-1">La première lettre en majuscule, sans accents</p>
                    </div>

                    <!-- Date d'arrivée -->
                    <div class="mb-4">
                        <label for="dateArrivee" class="block text-sm font-medium text-gray-700 mb-1">
                            Date d'arrivée <span class="text-red-500">*</span>
                        </label>
                        <input type="date" 
                               id="dateArrivee" 
                               name="dateArrivee" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                               required>
                    </div>

                    <!-- État du dossier -->
                    <div class="mb-4">
                        <label for="etatDossier" class="block text-sm font-medium text-gray-700 mb-1">
                            État du dossier <span class="text-red-500">*</span>
                        </label>
                        <select id="etatDossier" 
                                name="etatDossier" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required>
                            <option value="">Sélectionnez un état</option>
                            <option value="En cours">En cours</option>
                            <option value="En attente">En attente</option>
                            <option value="Terminé">Terminé</option>
                        </select>
                    </div>

                    <!-- Date fin de traitement (hidden by default) -->
                    <div id="dateFinContainer" class="mb-4 hidden">
                        <label for="dateFin" class="block text-sm font-medium text-gray-700 mb-1">
                            Date de fin de traitement <span class="text-red-500">*</span>
                        </label>
                        <input type="date" 
                               id="dateFin" 
                               name="dateFin" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <!-- Nombre d'écritures (hidden by default) -->
                    <div id="nombreEcrituresContainer" class="mb-4 hidden">
                        <label for="nombreEcritures" class="block text-sm font-medium text-gray-700 mb-1">
                            Nombre d'écritures <span class="text-red-500">*</span>
                        </label>
                        <input type="number" 
                               id="nombreEcritures" 
                               name="nombreEcritures" 
                               min="0"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <!-- Pièces saisies -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Pièces saisies</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesSaisies" value="achats" class="rounded text-blue-500">
                                <span class="text-sm">Achats</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesSaisies" value="ventes" class="rounded text-blue-500">
                                <span class="text-sm">Ventes</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesSaisies" value="banque" class="rounded text-blue-500">
                                <span class="text-sm">Banque</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesSaisies" value="caisse" class="rounded text-blue-500">
                                <span class="text-sm">Caisse</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesSaisies" value="OD" class="rounded text-blue-500">
                                <span class="text-sm">OD</span>
                            </label>
                        </div>
                    </div>

                    <!-- Pièces manquantes -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Pièces manquantes</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesManquantes" value="achats" class="rounded text-blue-500">
                                <span class="text-sm">Achats</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesManquantes" value="ventes" class="rounded text-blue-500">
                                <span class="text-sm">Ventes</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesManquantes" value="releve" class="rounded text-blue-500">
                                <span class="text-sm">Relevé</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="piecesManquantes" value="salaires" class="rounded text-blue-500">
                                <span class="text-sm">Salaires</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" id="autresCheck" name="piecesManquantes" value="autres" class="rounded text-blue-500">
                                <span class="text-sm">Autres à détailler</span>
                            </label>
                        </div>
                        <!-- Champ pour autres détails -->
                        <div id="autresDetailContainer" class="mt-2 hidden">
                            <input type="text" 
                                   id="autresDetail" 
                                   name="autresDetail" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                   placeholder="Précisez les autres pièces manquantes...">
                        </div>
                    </div>

                    <!-- Remarque -->
                    <div class="mb-6">
                        <label for="remarque" class="block text-sm font-medium text-gray-700 mb-1">Remarque</label>
                        <textarea id="remarque" 
                                  name="remarque" 
                                  rows="3" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                  placeholder="Ajoutez une remarque (facultatif)"></textarea>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" 
                            class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Ajouter le dossier
                    </button>
                </form>
                <!-- Error container -->
                <div id="addFormError" class="mt-3 text-red-500 text-sm"></div>
            </div>
        </section>

        <!-- Dossiers Section -->
        <section id="list" class="section-content hidden">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">Liste des dossiers</h2>
                <div id="dossierListContainer" class="space-y-4">
                    <!-- Dossiers will be dynamically added here -->
                </div>
            </div>
        </section>

        <!-- Modifier Section -->
        <section id="modify" class="section-content hidden">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">Modifier un dossier</h2>
                <div id="modifyListContainer" class="space-y-4">
                    <!-- Dossiers with modify buttons will be added here -->
                </div>
                <!-- Modification form (hidden by default) -->
                <div id="modifyFormContainer" class="hidden mt-6 border-t pt-6">
                    <!-- The form will be dynamically populated -->
                </div>
            </div>
        </section>

        <!-- Supprimer Section -->
        <section id="delete" class="section-content hidden">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">Supprimer un dossier</h2>
                <div id="deleteListContainer" class="space-y-4">
                    <!-- Dossiers with delete buttons will be added here -->
                </div>
            </div>
        </section>

        <!-- États Section -->
        <section id="states" class="section-content hidden">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">États</h2>
                <!-- Tab Navigation -->
                <div class="flex space-x-2 mb-6">
                    <button class="state-tab px-4 py-2 rounded-lg text-sm font-medium bg-blue-500 text-white" data-tab="traites">
                        Dossiers traités
                    </button>
                    <button class="state-tab px-4 py-2 rounded-lg text-sm font-medium" data-tab="manquantes">
                        Pièces manquantes
                    </button>
                    <button class="state-tab px-4 py-2 rounded-lg text-sm font-medium" data-tab="ecritures">
                        Écritures total
                    </button>
                </div>
                <!-- Tab Content -->
                <div id="stateTabContent">
                    <!-- Content will be dynamically loaded here -->
                </div>
                <!-- Print Button -->
                <button id="printState" class="mt-6 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium">
                    <i class="fas fa-print mr-2"></i>Imprimer
                </button>
            </div>
        </section>

        <!-- Rechercher Section -->
        <section id="search" class="section-content hidden">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">Rechercher un dossier</h2>
                <form id="searchForm" class="mb-6">
                    <!-- Nom search -->
                    <div class="mb-4">
                        <label for="searchNom" class="block text-sm font-medium text-gray-700 mb-1">
                            Nom du dossier
                        </label>
                        <input type="text" 
                               id="searchNom" 
                               name="searchNom" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="Rechercher par nom...">
                    </div>

                    <!-- Date range -->
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="searchDateDebut" class="block text-sm font-medium text-gray-700 mb-1">
                                Date début
                            </label>
                            <input type="date" 
                                   id="searchDateDebut" 
                                   name="searchDateDebut" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="searchDateFin" class="block text-sm font-medium text-gray-700 mb-1">
                                Date fin
                            </label>
                            <input type="date" 
                                   id="searchDateFin" 
                                   name="searchDateFin" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- Search Button -->
                    <button type="submit" 
                            class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        <i class="fas fa-search mr-2"></i>Rechercher
                    </button>
                </form>
                <!-- Search Results -->
                <div id="searchResults" class="space-y-4">
                    <!-- Results will be dynamically added here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="js/app.js"></script>
</body>
</html>
